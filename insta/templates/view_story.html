<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  {% load static %}
</head>
<body>
  
<div class="container">

  <!-- Display users with stories -->
      <h2>Stories by Other Users:</h2>
      <ul>
        {% for user_with_stories in users_with_stories %}
        {% if user_with_stories.following != user %}
            <li>
                <a href="{% url 'view_story' user_with_stories.following.username user_with_stories.story.first.id %}">{{ user_with_stories.following }}
                <p>{{ user_with_stories.date }}</p>
                <img class="card-img-top" src="{{ user_with_stories.story.first.content.url }}" alt="Card image cap" style="width: 30rem;">
              </a>
            </li>
            {% else %}
            

            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                
                <div class="card mt-3" style="width: 30rem;" >
                  <img class="card-img-top" src="{{ user_story.content.url }}" alt="Card image cap">
                  <div class="card-body">
                      <p class="card-text">{{ user_story.user.username }}
                      </p>
                      <a class="carousel-control-prev" href="{% if previous_story %}{% url 'view_story' user.username previous_story.id %}{% endif %}" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                      </a>
                      <a class="carousel-control-next" href="{% if next_story %}{% url 'view_story' user.username next_story.id %}{% endif %}" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                      </a>  </div>
                </div>
                
              </div>
            </div>
        {% endif %}
    {% endfor %}
    </div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
